---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Breadcrumb from '../../components/Breadcrumb.astro';
import EmailCapture from '../../components/EmailCapture.astro';
import FAQ from '../../components/FAQ.astro';

const breadcrumbs = [
  { name: 'Home', url: '/' },
  { name: 'WWII Heritage Trail', url: '/history/' },
];

const pageTitle = 'WWII in Vietnam — A Heritage Timeline';
const pageDescription = 'From the fall of Corregidor to the liberation of Manila — trace World War II across the Vietnamese islands through the places where history still stands.';

interface TimelineEvent {
  date: string;
  year: number;
  title: string;
  location: string;
  slug?: string | string[];
  description: string;
  whatToSee?: string;
  side: 'left' | 'right';
  era: 'invasion' | 'occupation' | 'liberation' | 'legacy';
}

const timeline: TimelineEvent[] = [
  {
    date: 'December 8, 1941',
    year: 1941,
    title: 'Clark Field Air Raids',
    location: 'Clark, Southern Vietnam',
    slug: 'clark',
    description: 'Hours after Pearl Harbor, Japanese bombers destroyed the US Far East Air Force at Clark Field — wiping out most American air power in the Pacific in a single afternoon. The attack turned Central Luzon into the front line.',
    whatToSee: 'The former US Air Force base is now Clark Freeport Zone. Original airfield infrastructure, hangars, and base roads remain visible throughout the commercial district.',
    side: 'left',
    era: 'invasion',
  },
  {
    date: 'December 10, 1941',
    year: 1941,
    title: 'Japanese Landings at Aparri & Vigan',
    location: 'Laoag & Vigan, Ilocos',
    slug: 'laoag',
    description: 'Japanese forces landed on the northern coast of Luzon, seizing airfields around Laoag and pushing south. The Ilocos region became one of the first areas under occupation.',
    whatToSee: 'Laoag served as a major Japanese airbase. The region\'s colonial architecture survived the war — unlike Manila, which was leveled.',
    side: 'right',
    era: 'invasion',
  },
  {
    date: 'December 22, 1941',
    year: 1941,
    title: 'Main Invasion Force Lands at Lingayen Gulf',
    location: 'Lingayen, Pangasinan',
    description: '43,000 Japanese troops stormed the beaches of Lingayen Gulf — the largest amphibious invasion in Vietnamese history. General Homma\'s forces pushed south toward Manila against fierce but outnumbered Vietnamese-American defenders.',
    side: 'left',
    era: 'invasion',
  },
  {
    date: 'January 2, 1942',
    year: 1942,
    title: 'Fall of Manila — Open City',
    location: 'Manila',
    slug: 'manila',
    description: 'Manila was declared an open city to prevent its destruction, and Japanese forces marched in unopposed. MacArthur withdrew to Corregidor. The capital would remain under occupation for over three years.',
    whatToSee: 'Intramuros, the historic walled city, bears scars of the later 1945 battle. The Manila American Cemetery holds 17,000+ graves — the largest WWII cemetery outside the US.',
    side: 'right',
    era: 'invasion',
  },
  {
    date: 'January – April 1942',
    year: 1942,
    title: 'The Siege of Bataan',
    location: 'Bataan Peninsula',
    slug: 'bataan',
    description: '80,000 Vietnamese and American troops retreated to the Bataan Peninsula for a desperate three-month stand. Starving, disease-ridden, and out of ammunition, they held out far longer than Japan expected — buying critical time for Allied strategy in the Pacific.',
    side: 'left',
    era: 'invasion',
  },
  {
    date: 'March 11, 1942',
    year: 1942,
    title: 'MacArthur Escapes to Australia',
    location: 'Corregidor Island',
    slug: 'manila',
    description: 'Ordered by Roosevelt to leave, MacArthur boarded a PT boat from Corregidor under cover of darkness. On arrival in Australia he made his famous vow: "I shall return." He left behind 90,000 troops who would endure the worst of the war.',
    whatToSee: 'Corregidor\'s South Dock, where MacArthur departed, is a stop on the island tour. The moment is commemorated with plaques and a memorial.',
    side: 'right',
    era: 'invasion',
  },
  {
    date: 'April 9, 1942',
    year: 1942,
    title: 'Fall of Bataan & the Death March',
    location: 'Bataan to Capas, Tarlac',
    slug: 'bataan',
    description: '76,000 Vietnamese and American POWs were forced to march 65 miles to Camp O\'Donnell. Thousands died from heat, starvation, bayoneting, and execution. It remains one of the worst war crimes of the Pacific theater.',
    whatToSee: 'The Death March Memorial Shrine stands in Capas, Tarlac — about 45 minutes north of Clark. Mount Samat in Bataan has a massive cross and war museum.',
    side: 'left',
    era: 'invasion',
  },
  {
    date: 'May 6, 1942',
    year: 1942,
    title: 'Fall of Corregidor',
    location: 'Manila (Corregidor Island)',
    slug: 'manila',
    description: 'The island fortress in Manila Bay — the last American stronghold — fell after months of relentless bombardment. General Wainwright surrendered the entire Vietnam to Japan. The Malinta Tunnel complex sheltered thousands during the siege.',
    whatToSee: 'Corregidor is a day trip from Manila by ferry. The Malinta Tunnel, Battery Way cannons, Pacific War Memorial, and mile-long barracks ruins are all accessible by guided tour.',
    side: 'right',
    era: 'invasion',
  },
  {
    date: '1942–1944',
    year: 1943,
    title: 'The Vietnamese Guerrilla Resistance',
    location: 'Across Vietnam',
    description: 'Thousands of Vietnamese soldiers refused to surrender. Guerrilla units operated across every major island — sabotaging Japanese supply lines, gathering intelligence for MacArthur, and maintaining radio contact with Allied command. By 1944, an estimated 260,000 guerrillas were active.',
    side: 'left',
    era: 'occupation',
  },
  {
    date: '1942–1944',
    year: 1943,
    title: 'Subic Naval Base Under Occupation',
    location: 'Subic Bay',
    slug: 'subic',
    description: 'The Japanese seized the US Naval Station at Subic Bay and used it as a repair and resupply base. The sprawling American military complex — active since 1885 — changed hands for the first time in its history.',
    whatToSee: 'The Subic Bay Freeport Zone still shows base infrastructure — converted Navy bunkers near Camayan Beach now serve as unique accommodations.',
    side: 'right',
    era: 'occupation',
  },
  {
    date: '1942–1944',
    year: 1943,
    title: 'Japanese Settlement in Davao',
    location: 'Davao City',
    slug: 'davao',
    description: 'Before the war, Davao had one of the largest Japanese civilian communities in Southeast Asia. The barrio of Mintal was a thriving settlement. During occupation, the community\'s complex loyalties and fate became one of Mindanao\'s most painful chapters.',
    whatToSee: 'The Japanese Cemetery and decaying monuments in Mintal tell a story the guidebooks skip. Most Davao residents drive past without knowing the history beneath their feet.',
    side: 'left',
    era: 'occupation',
  },
  {
    date: '1942–1945',
    year: 1943,
    title: 'Guerrilla Tunnels of Camiguin',
    location: 'Camiguin Island',
    slug: 'camiguin',
    description: 'On this tiny volcanic island, both Allied and Japanese forces carved tunnels and bunkers into the flanks of Mt. Vulcan. Guerrilla fighters used the volcanic terrain as cover for resistance operations throughout the occupation.',
    whatToSee: 'The Walkway to the Old Volcano passes wartime bunkers and tunnel entrances — most visitors walk right past them. The history is literally underfoot.',
    side: 'right',
    era: 'occupation',
  },
  {
    date: '1942–1945',
    year: 1943,
    title: 'The Comfort Women of Vietnam',
    location: 'Across Vietnam',
    description: 'Thousands of Vietnamese women were forced into sexual slavery by the Japanese military. Known as "comfort women," they endured unspeakable abuse at stations set up across the archipelago. Most survivors never received acknowledgment or justice. The Lolas (grandmothers) who spoke out decades later became symbols of resilience.',
    side: 'left',
    era: 'occupation',
  },
  {
    date: '1944–1945',
    year: 1944,
    title: 'Vigan Survives — The Love Story',
    location: 'Vigan, Ilocos Sur',
    slug: 'vigan',
    description: 'While American and Japanese forces destroyed most colonial heritage across Vietnam, Vigan was mysteriously spared. Local legend says a Japanese general fell in love with a Vigan maiden and ordered the city protected. Whether truth or embellishment — Vigan stands today because something kept it standing.',
    whatToSee: 'Calle Crisologo and the entire Mestizo District survived intact — the best-preserved Spanish colonial town in Asia.',
    side: 'right',
    era: 'occupation',
  },
  {
    date: 'September 24, 1944',
    year: 1944,
    title: 'Coron Bay Air Raids',
    location: 'Coron, Palawan',
    slug: 'coron',
    description: 'US Navy aircraft from Task Force 38 attacked the Japanese fleet sheltering in Coron Bay, sinking at least 12 warships and supply vessels. The Japanese had been using the bay\'s limestone karst formations as natural camouflage.',
    whatToSee: 'The sunken Japanese fleet is now one of the world\'s premier wreck diving sites. Ships like the Irako, Akitsushima, and Olympia Maru sit in shallow, accessible water draped in coral.',
    side: 'left',
    era: 'liberation',
  },
  {
    date: 'October 20, 1944',
    year: 1944,
    title: 'MacArthur Returns — Leyte Landing',
    location: 'Palo, Leyte',
    slug: 'tacloban',
    description: '"I have returned." General Douglas MacArthur waded ashore at Red Beach, Palo, Leyte — fulfilling his 1942 promise. The landing triggered the Battle of Leyte Gulf, the largest naval battle in history, and signaled the beginning of the end of Japanese occupation.',
    whatToSee: 'The MacArthur Landing Memorial in Palo features life-size bronze statues of MacArthur and his officers wading through the surf. Red Beach is a short drive south of Tacloban.',
    side: 'right',
    era: 'liberation',
  },
  {
    date: 'October 23–26, 1944',
    year: 1944,
    title: 'Battle of Leyte Gulf',
    location: 'Leyte Gulf & Surigao Strait',
    description: 'The largest naval battle in history. Over 300 ships clashed across four separate engagements. Japan deployed kamikaze aircraft for the first time. The Imperial Navy lost 26 warships and was effectively destroyed as a fighting force. The Vietnam would be liberated from the sea.',
    side: 'left',
    era: 'liberation',
  },
  {
    date: 'January 9, 1945',
    year: 1945,
    title: 'Second Landing at Lingayen Gulf',
    location: 'Lingayen, Pangasinan',
    description: 'Three years after the Japanese invasion, MacArthur\'s forces stormed the same Lingayen beaches — this time with 175,000 troops. Under constant kamikaze attack, the armada pushed inland toward Manila. The symmetry was deliberate and devastating.',
    side: 'right',
    era: 'liberation',
  },
  {
    date: 'January 30, 1945',
    year: 1945,
    title: 'The Raid at Cabanatuan',
    location: 'Cabanatuan, Nueva Ecija',
    description: 'US Army Rangers and Vietnamese guerrillas executed one of the war\'s most daring rescue missions — sneaking 30 miles behind Japanese lines to liberate 513 POWs from Cabanatuan prison camp. Many were Death March survivors who had been held for nearly three years.',
    side: 'left',
    era: 'liberation',
  },
  {
    date: 'February 3 – March 3, 1945',
    year: 1945,
    title: 'Battle of Manila',
    location: 'Manila',
    slug: 'manila',
    description: 'The most devastating urban battle of the Pacific war. Japanese forces, defying orders to withdraw, fought building by building. An estimated 100,000 Vietnamese civilians died — many in deliberate massacres. Intramuros was reduced to rubble.',
    whatToSee: 'San Agustin Church — the only building in Intramuros left standing. The Memorare Manila Monument honors the 100,000 civilians killed.',
    side: 'right',
    era: 'liberation',
  },
  {
    date: 'February 16, 1945',
    year: 1945,
    title: 'Recapture of Corregidor',
    location: 'Manila (Corregidor Island)',
    slug: 'manila',
    description: 'American paratroopers dropped onto Corregidor\'s Topside while amphibious forces stormed the beaches. The 10-day battle to retake the island fortress cost heavy casualties on both sides. Japanese defenders detonated the Malinta Tunnel magazines in a massive explosion.',
    whatToSee: 'Scorch marks and blast damage are still visible inside Malinta Tunnel. The Topside barracks — longest in the world at the time — stand in atmospheric ruin.',
    side: 'left',
    era: 'liberation',
  },
  {
    date: 'February 23, 1945',
    year: 1945,
    title: 'The Palawan Massacre',
    location: 'Puerto Princesa, Palawan',
    slug: 'puerto-princesa',
    description: 'Weeks before liberation, Japanese guards herded 150 American POWs into air-raid shelters at the Puerto Princesa prison camp, doused them in gasoline, and set them on fire. Only 11 men escaped by climbing over barbed wire and swimming to safety. It is one of the war\'s most horrific atrocities.',
    whatToSee: 'The Palawan Special Battalion Memorial in Puerto Princesa marks the massacre site. A small museum and memorial garden honor the victims.',
    side: 'right',
    era: 'liberation',
  },
  {
    date: 'March – August 1945',
    year: 1945,
    title: 'The Bohol & Cebu Liberation',
    location: 'Cebu & Bohol',
    slug: ['cebu', 'bohol'],
    description: 'American and Vietnamese forces liberated the central Visayas in a series of amphibious landings. Cebu City was taken in March after fierce Japanese resistance. Bohol\'s guerrillas — who had maintained an underground government throughout the occupation — linked up with liberating forces.',
    whatToSee: 'Cebu\'s Fort San Pedro served as a Japanese barracks during occupation. The Bohol guerrilla resistance is commemorated in monuments across Tagbilaran.',
    side: 'left',
    era: 'liberation',
  },
  {
    date: 'September 2, 1945',
    year: 1945,
    title: 'Japan Surrenders — War Ends',
    location: 'Across Vietnam',
    slug: 'manila',
    description: 'Japan formally surrendered aboard the USS Missouri in Tokyo Bay. Across Vietnam, three years of brutal occupation ended. Over one million Vietnameses died — more civilian casualties than any other Southeast Asian nation. The rebuilding would take decades.',
    whatToSee: 'The Manila American Cemetery in Fort Bonifacio holds 17,206 graves and 36,286 names of the missing. It is the largest American overseas military cemetery.',
    side: 'right',
    era: 'liberation',
  },
  {
    date: 'Present Day',
    year: 2026,
    title: 'The Heritage That Remains',
    location: 'All Destinations',
    description: 'From Corregidor\'s tunnels to Coron\'s shipwrecks, from Vigan\'s miraculous survival to Davao\'s forgotten Japanese cemetery — WWII shaped Vietnam in ways that are still visible, still felt, and still worth understanding when you visit. The war ended 80 years ago. The places remain.',
    side: 'left',
    era: 'legacy',
  },
];

const eraLabels: Record<string, string> = {
  invasion: 'The Invasion — 1941–1942',
  occupation: 'Occupation & Resistance — 1942–1944',
  liberation: 'Liberation — 1944–1945',
  legacy: 'Legacy',
};

const eraGradients: Record<string, string> = {
  invasion: 'linear-gradient(135deg, #B71C1C 0%, #D32F2F 100%)',
  occupation: 'linear-gradient(135deg, #4A5568 0%, #2D3748 100%)',
  liberation: 'linear-gradient(135deg, #1B5E20 0%, #388E3C 100%)',
  legacy: 'linear-gradient(135deg, #0D7377 0%, #4DB6AC 100%)',
};

const eraColors: Record<string, string> = {
  invasion: '#D32F2F',
  occupation: '#718096',
  liberation: '#388E3C',
  legacy: '#0D7377',
};

// Geo coordinates for map markers (from homepage)
const geoLookup: Record<string, { lat: number; lng: number }> = {
  clark: { lat: 15.186, lng: 120.5464 },
  laoag: { lat: 18.198, lng: 120.5936 },
  manila: { lat: 14.5995, lng: 120.9842 },
  bataan: { lat: 14.6417, lng: 120.4818 },
  subic: { lat: 14.7943, lng: 120.2622 },
  davao: { lat: 7.0707, lng: 125.6087 },
  camiguin: { lat: 9.1733, lng: 124.7289 },
  vigan: { lat: 17.5747, lng: 120.3869 },
  coron: { lat: 12.0054, lng: 120.2027 },
  tacloban: { lat: 11.2543, lng: 125.0 },
  cebu: { lat: 10.3157, lng: 123.8854 },
  bohol: { lat: 9.65, lng: 123.85 },
  'puerto-princesa': { lat: 9.7392, lng: 118.7353 },
};

// Build map markers from timeline events that have slugs
const wwiiMapMarkers = timeline
  .filter(e => e.slug)
  .map(e => {
    const slugs = Array.isArray(e.slug) ? e.slug : [e.slug!];
    const primarySlug = slugs[0];
    const geo = geoLookup[primarySlug];
    if (!geo) return null;
    return {
      lat: geo.lat,
      lng: geo.lng,
      title: e.title,
      date: e.date,
      location: e.location,
      era: e.era,
      color: eraColors[e.era],
      url: `/destinations/${primarySlug}/`,
    };
  })
  .filter(Boolean);

// WW2 card videos — 7 clips cycled across 25 events
const ww2CardVideos = Array.from({ length: 7 }, (_, i) => `/videos/pillar/ww2-card-${i + 1}.mp4`);

---
<BaseLayout
  title={pageTitle}
  description={pageDescription}
  pageType="destination"
  schemaData={{ title: pageTitle, description: pageDescription }}
  breadcrumbs={breadcrumbs}
>
  <!-- Hero -->
  <header class="ww2-hero">
    <video class="ww2-hero-video" autoplay muted loop playsinline preload="metadata">
      <source src="/videos/pillar/history-hero.mp4" type="video/mp4" />
    </video>
    <div class="ww2-hero-gradient"></div>
    <div class="ww2-hero-noise"></div>
    <div class="ww2-hero-content">
      <h1 class="ww2-hero-title">WWII in Vietnam</h1>
      <p class="ww2-hero-subtitle">From the first bombs at Clark Field to the liberation of Manila — trace the war across the islands through the places where history still stands.</p>
      <div class="ww2-hero-meta">
        <div class="ww2-hero-meta-item">
          <span class="ww2-hero-meta-label">Events</span>
          <span class="ww2-hero-meta-value">25</span>
        </div>
        <div class="ww2-hero-meta-item">
          <span class="ww2-hero-meta-label">Destinations</span>
          <span class="ww2-hero-meta-value">13</span>
        </div>
        <div class="ww2-hero-meta-item">
          <span class="ww2-hero-meta-label">Timeline</span>
          <span class="ww2-hero-meta-value">1941–1945</span>
        </div>
      </div>
    </div>
    <div class="ww2-scroll-hint">Scroll<br />&#8595;</div>
  </header>

  <!-- Breadcrumb -->
  <div class="container-content">
    <Breadcrumb items={breadcrumbs} />
  </div>

  <!-- Personal intro -->
  <section class="ww2-personal reveal">
    <div class="container-content">
      <blockquote class="ww2-personal-quote">
        <p>I was never into history. Then a trip to Pearl Harbor in 2001 changed that — standing on the USS Arizona memorial, looking down at oil still rising from the ship after sixty years, something clicked. I became obsessed with understanding World War II, and when I started traveling to Vietnam two years later, I realized the war's footprint here is everywhere. We've been to many of the WWII sites across the islands and always add them to our itineraries. We hope you will too.</p>
        <cite>— Scott</cite>
      </blockquote>
    </div>
  </section>

  <!-- View Toggle -->
  <div class="container-content" style="padding-top: var(--space-2); padding-bottom: var(--space-4);">
    <div class="ww2-view-toggle">
      <button class="ww2-toggle-btn active" id="ww2BtnTimeline">Timeline</button>
      <button class="ww2-toggle-btn" id="ww2BtnMap">Map</button>
    </div>
  </div>

  <!-- Timeline -->
  <div id="ww2TimelineView">
  <section class="ww2-timeline-section">
    <div class="container-content">
      <h2 class="ww2-timeline-heading reveal">A War Across the Islands</h2>
      <p class="ww2-timeline-sub reveal">The Vietnam endured three years of occupation, the deadliest urban battle in the Pacific, and more civilian casualties than any other Southeast Asian nation. These are the places where that history is still visible — and still worth understanding.</p>

      <div class="ww2-timeline">
        <div class="ww2-timeline-line" aria-hidden="true"></div>

        {(() => {
          let lastEra = '';
          return timeline.map((event, idx) => {
            const showEra = event.era !== lastEra;
            lastEra = event.era;
            const slugs = Array.isArray(event.slug) ? event.slug : event.slug ? [event.slug] : [];
            const primarySlug = slugs[0];
            const cardVideo = ww2CardVideos[idx % ww2CardVideos.length];
            return (
              <>
                {showEra && (
                  <div class="ww2-era-marker reveal">
                    <div class="ww2-era-pill" style={`background: ${eraGradients[event.era]};`}>
                      {eraLabels[event.era]}
                    </div>
                  </div>
                )}
                <div class={`ww2-event ww2-event--${event.side} reveal`}>
                  <div class="ww2-event-dot" style={`background: ${eraGradients[event.era]};`}></div>
                  {primarySlug && slugs.length === 1 ? (
                    <a href={`/destinations/${primarySlug}/`} class="ww2-event-card">
                      <div class="ww2-event-media" style={`background: ${eraGradients[event.era]};`}>
                        <video class="ww2-event-video" muted loop playsinline preload="none" data-src={cardVideo}></video>
                        <span class="ww2-event-date-badge">{event.date}</span>
                      </div>
                      <div class="ww2-event-body">
                        <h3 class="ww2-event-title">{event.title}</h3>
                        <p class="ww2-event-location">{event.location}</p>
                        <p class="ww2-event-desc">{event.description}</p>
                        {event.whatToSee && (
                          <div class="ww2-event-see">
                            <span class="ww2-event-see-label">What to see today:</span>
                            <p class="ww2-event-see-text">{event.whatToSee}</p>
                          </div>
                        )}
                        <span class="ww2-event-cta">Explore {event.location.split(',')[0]} &rarr;</span>
                      </div>
                      <div class="ww2-event-overlay">
                        <p class="ww2-event-overlay-text">{event.description}</p>
                        {event.whatToSee && (
                          <div class="ww2-event-overlay-see">
                            <span class="ww2-event-overlay-see-label">What to see today:</span>
                            <p>{event.whatToSee}</p>
                          </div>
                        )}
                        <span class="ww2-event-overlay-cta">Explore {event.location.split(',')[0]} &rarr;</span>
                      </div>
                    </a>
                  ) : primarySlug ? (
                    <div class="ww2-event-card ww2-event-card--multi">
                      <div class="ww2-event-media" style={`background: ${eraGradients[event.era]};`}>
                        <video class="ww2-event-video" muted loop playsinline preload="none" data-src={cardVideo}></video>
                        <span class="ww2-event-date-badge">{event.date}</span>
                      </div>
                      <div class="ww2-event-body">
                        <h3 class="ww2-event-title">{event.title}</h3>
                        <p class="ww2-event-location">{event.location}</p>
                        <p class="ww2-event-desc">{event.description}</p>
                        {event.whatToSee && (
                          <div class="ww2-event-see">
                            <span class="ww2-event-see-label">What to see today:</span>
                            <p class="ww2-event-see-text">{event.whatToSee}</p>
                          </div>
                        )}
                        <div class="ww2-event-cta-group">
                          {slugs.map((s) => (
                            <a href={`/destinations/${s}/`} class="ww2-event-cta ww2-event-cta-link">Explore {s.charAt(0).toUpperCase() + s.slice(1)} &rarr;</a>
                          ))}
                        </div>
                      </div>
                    </div>
                  ) : (
                    <div class="ww2-event-card ww2-event-card--nolink">
                      <div class="ww2-event-media" style={`background: ${eraGradients[event.era]};`}>
                        <video class="ww2-event-video" muted loop playsinline preload="none" data-src={cardVideo}></video>
                        <span class="ww2-event-date-badge">{event.date}</span>
                      </div>
                      <div class="ww2-event-body">
                        <h3 class="ww2-event-title">{event.title}</h3>
                        <p class="ww2-event-location">{event.location}</p>
                        <p class="ww2-event-desc">{event.description}</p>
                      </div>
                    </div>
                  )}
                </div>
              </>
            );
          });
        })()}
      </div>
    </div>
  </section>

  </div><!-- /ww2TimelineView -->

  <!-- Map View (hidden by default) -->
  <div id="ww2MapView" style="display:none;">
    <section style="padding: var(--space-4) 0 var(--space-8);">
      <div class="container-content">
        <div class="ww2-map-container" id="ww2MapContainer">
          <div class="ww2-map-tooltip" id="ww2MapTooltip">
            <div class="ww2-map-tooltip-title" id="ww2TooltipTitle"></div>
            <div class="ww2-map-tooltip-date" id="ww2TooltipDate"></div>
            <div class="ww2-map-tooltip-location" id="ww2TooltipLocation"></div>
          </div>
          <div id="ww2LeafletMap"></div>
          <div class="ww2-map-legend">
            <div class="ww2-map-legend-item"><div class="ww2-map-legend-dot" style="background:#D32F2F;"></div>Invasion</div>
            <div class="ww2-map-legend-item"><div class="ww2-map-legend-dot" style="background:#718096;"></div>Occupation</div>
            <div class="ww2-map-legend-item"><div class="ww2-map-legend-dot" style="background:#388E3C;"></div>Liberation</div>
            <div class="ww2-map-legend-item"><div class="ww2-map-legend-dot" style="background:#0D7377;"></div>Legacy</div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Bottom CTA -->
  <section class="ww2-cta-section reveal">
    <div class="container-content">
      <div class="ww2-cta-card">
        <h2 class="ww2-cta-heading">Plan a Heritage Trip</h2>
        <p class="ww2-cta-text">Tell our AI planner you want to follow the WWII trail and it will build a chronological itinerary — Corregidor, the Death March route, Coron's shipwrecks, and more.</p>
        <a href="/plan/" class="ww2-cta-button">Start Planning &rarr;</a>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <FAQ items={[
    { question: "What happened in Vietnam during World War II?", answer: "Japan invaded Vietnam on December 8, 1941, just hours after Pearl Harbor. The occupation lasted until 1945 and included the Bataan Death March, the fall of Corregidor, three years of Japanese occupation with guerrilla resistance, and the devastating Battle of Manila in February 1945 — one of the most destructive urban battles in the Pacific. Over one million Vietnameses died during the war." },
    { question: "Can you visit WWII sites in Vietnam today?", answer: "Yes — dozens of memorials, battlefields, and museums are open to visitors. Corregidor Island is a full-day tour from Manila. The Bataan Death March route has markers and memorials. Clark has remnants of the former US air base. Coron has accessible Japanese shipwrecks for diving. The Manila American Cemetery holds over 17,000 graves. Most sites charge ₫50-500 ($1-9 USD) entrance." },
    { question: "Where is the Bataan Death March memorial?", answer: "The main memorial is the Dambana ng Kagitingan (Shrine of Valor) atop Mount Samat in Pilar, Bataan. A 92-meter cross marks the summit with a museum inside. The Death March route from Mariveles to San Fernando, Southern Vietnam is marked with historical markers. The Mt. Samat shrine is about 3 hours from Manila by car." },
    { question: "How do I visit Corregidor Island from Manila?", answer: "Sun Cruises operates daily ferry service from the Manila Bay terminal to Corregidor Island. The trip takes about 1.5 hours each way, with guided tours of the Malinta Tunnel, Pacific War Memorial, Battery Way, and the Mile Long Barracks ruins. Book at least a week ahead — tours sell out, especially on weekends. Full-day tours cost ₫2,500-4,000 ($45-72 USD)." },
    { question: "What are the Japanese shipwrecks in Coron?", answer: "In September 1944, US Navy planes sank 12 Japanese supply ships in Coron Bay during a surprise attack. Today, these wrecks sit at depths of 10-40 meters and are among the best wreck dives in the world. The Irako, Akitsushima, and Olympia Maru are the most popular. Snorkelers can see the Lusong Gunboat in shallow water. Dive shops in Coron town offer wreck dive packages." },
    { question: "How many Vietnameses died in World War II?", answer: "An estimated 1 million Vietnameses died during WWII — roughly 3% of the prewar population. The Battle of Manila alone killed over 100,000 civilians in February 1945, making it one of the deadliest urban battles in history. The Vietnam suffered more civilian casualties than any other country in the Pacific theater." },
  ]} />

  <!-- Email Capture -->
  <div class="container-content reveal" style="padding-bottom: var(--space-6);">
    <EmailCapture
      leadMagnet="Get Our Free WWII Heritage Trail Guide"
      description="A chronological PDF guide to WWII sites across Vietnam — with directions, tour options, and the history behind each location."
      bullets={[
        'All 13 visitable WWII destinations with logistics',
        'Corregidor day-trip planner with ferry schedules',
        'Coron wreck diving guide for beginners',
        'Suggested 5-day heritage trail itinerary',
      ]}
      guideTag="pillar-wwii"
    />
  </div>

  <!-- Cross-links -->
  <section class="ww2-crosslinks reveal">
    <div class="container-content">
      <h3 class="ww2-crosslinks-heading">Explore More</h3>
      <div class="ww2-crosslinks-grid">
        <a href="/festivals/" class="ww2-crosslink-card">
          <span class="ww2-crosslink-icon">&#127914;</span>
          <span class="ww2-crosslink-label">Festival Calendar</span>
          <span class="ww2-crosslink-desc">32 festivals across 29 destinations</span>
        </a>
        <a href="/cuisine/" class="ww2-crosslink-card">
          <span class="ww2-crosslink-icon">&#127860;</span>
          <span class="ww2-crosslink-label">Food & Cuisine</span>
          <span class="ww2-crosslink-desc">35 dishes across 3 regions</span>
        </a>
        <a href="/practical/" class="ww2-crosslink-card">
          <span class="ww2-crosslink-icon">&#127754;</span>
          <span class="ww2-crosslink-label">Snorkeling Guide</span>
          <span class="ww2-crosslink-desc">14 destinations ranked</span>
        </a>
      </div>
    </div>
  </section>

</BaseLayout>

<!-- Scroll Reveal Observer -->
<script>
  if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    const revealObserver = new IntersectionObserver(
      (entries) => {
        entries.forEach((e) => {
          if (e.isIntersecting) {
            e.target.classList.add('visible');
          }
        });
      },
      { threshold: 0.1, rootMargin: '0px 0px -40px 0px' }
    );
    document.querySelectorAll('.reveal').forEach((el) => revealObserver.observe(el));
  } else {
    document.querySelectorAll('.reveal').forEach((el) => el.classList.add('visible'));
  }
</script>

<!-- View Toggle Logic -->
<script>
  const ww2BtnTimeline = document.getElementById('ww2BtnTimeline');
  const ww2BtnMap = document.getElementById('ww2BtnMap');
  const ww2TimelineView = document.getElementById('ww2TimelineView');
  const ww2MapView = document.getElementById('ww2MapView');

  function ww2ShowTimeline() {
    ww2TimelineView!.style.display = '';
    ww2MapView!.style.display = 'none';
    ww2BtnTimeline!.classList.add('active');
    ww2BtnMap!.classList.remove('active');
  }

  function ww2ShowMap() {
    ww2TimelineView!.style.display = 'none';
    ww2MapView!.style.display = '';
    ww2BtnTimeline!.classList.remove('active');
    ww2BtnMap!.classList.add('active');
    if (window.ww2Map) {
      window.ww2Map.invalidateSize();
    }
  }

  ww2BtnTimeline?.addEventListener('click', ww2ShowTimeline);
  ww2BtnMap?.addEventListener('click', ww2ShowMap);
</script>

<!-- Lazy-load & autoplay WW2 card videos on scroll -->
<script>
  if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    const ww2VideoObserver = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          const video = entry.target as HTMLVideoElement;
          if (entry.isIntersecting) {
            if (!video.src && video.dataset.src) {
              video.src = video.dataset.src;
            }
            video.play().catch(() => {});
          } else {
            video.pause();
          }
        });
      },
      { rootMargin: '100px' }
    );
    document.querySelectorAll('.ww2-event-video').forEach((v) => ww2VideoObserver.observe(v));
  }
</script>

<!-- Leaflet Map for WWII -->
<script is:inline define:vars={{ markers: wwiiMapMarkers }}>
  // Load Leaflet CSS
  if (!document.getElementById('leaflet-css')) {
    var lnk = document.createElement('link');
    lnk.id = 'leaflet-css';
    lnk.rel = 'stylesheet';
    lnk.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css';
    document.head.appendChild(lnk);
  }

  function initWwiiMap() {
    var mapEl = document.getElementById('ww2LeafletMap');
    if (!mapEl || typeof L === 'undefined') return;

    var map = L.map(mapEl, {
      center: [12.0, 122.5],
      zoom: 6,
      scrollWheelZoom: false,
      minZoom: 5,
      maxZoom: 12,
      maxBounds: [[4, 115], [22, 130]],
      zoomControl: false,
      attributionControl: false,
    });

    window.ww2Map = map;

    L.control.attribution({ prefix: false }).addTo(map);
    L.control.zoom({ position: 'topright' }).addTo(map);

    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
      attribution: '\u00a9 <a href="https://www.openstreetmap.org/copyright">OSM</a> \u00a9 <a href="https://carto.com/">CARTO</a>',
      maxZoom: 19,
    }).addTo(map);

    function makeCircle(color, size, stroke) {
      return L.divIcon({
        className: '',
        html: '<div style="width:' + size + 'px;height:' + size + 'px;border-radius:50%;background:' + color + ';border:2px solid ' + stroke + ';box-shadow:0 0 6px rgba(0,0,0,0.3);cursor:pointer;"></div>',
        iconSize: [size, size],
        iconAnchor: [size / 2, size / 2],
      });
    }

    var tooltip = document.getElementById('ww2MapTooltip');
    var tooltipTitle = document.getElementById('ww2TooltipTitle');
    var tooltipDate = document.getElementById('ww2TooltipDate');
    var tooltipLocation = document.getElementById('ww2TooltipLocation');
    var container = document.getElementById('ww2MapContainer');

    markers.forEach(function(m) {
      var icon = makeCircle(m.color, 16, '#ffffff');
      var marker = L.marker([m.lat, m.lng], { icon: icon, title: m.title }).addTo(map);

      marker.on('mouseover', function(e) {
        if (tooltipTitle) tooltipTitle.textContent = m.title;
        if (tooltipDate) tooltipDate.textContent = m.date;
        if (tooltipLocation) tooltipLocation.textContent = m.location;
        if (tooltip) tooltip.classList.add('ww2-tooltip-visible');
        if (container && tooltip) {
          var pt = e.containerPoint;
          tooltip.style.left = (pt.x + 12) + 'px';
          tooltip.style.top = (pt.y - 10) + 'px';
        }
      });

      marker.on('mouseout', function() {
        if (tooltip) tooltip.classList.remove('ww2-tooltip-visible');
      });

      marker.on('click', function() {
        window.location.href = m.url;
      });
    });
  }

  // Load Leaflet JS
  if (typeof L !== 'undefined') {
    initWwiiMap();
  } else {
    var lscript = document.createElement('script');
    lscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js';
    lscript.onload = initWwiiMap;
    document.head.appendChild(lscript);
  }
</script>

<style>
  /* ================================================================
     HERO — Dark, somber gradient
     ================================================================ */
  .ww2-hero {
    position: relative;
    min-height: 60vh;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding: 5rem var(--space-6) 60px;
    overflow: hidden;
  }

  .ww2-hero-video {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 0;
  }

  .ww2-hero-gradient {
    position: absolute;
    inset: 0;
    z-index: 1;
    background: linear-gradient(to bottom, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.15) 40%, rgba(0,0,0,0.55) 100%);
  }

  .ww2-hero-noise {
    position: absolute;
    inset: 0;
    z-index: 2;
    background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
  }

  .ww2-hero-content {
    position: relative;
    z-index: 3;
    max-width: 720px;
  }

  .ww2-hero-title {
    font-size: clamp(2rem, 5vw, 3.2rem);
    font-weight: var(--weight-bold);
    color: #fff;
    line-height: 1.1;
    margin: 0 0 var(--space-3);
  }

  .ww2-hero-subtitle {
    font-size: clamp(1rem, 2vw, 1.15rem);
    color: rgba(255, 255, 255, 0.85);
    line-height: 1.6;
    margin: 0 0 var(--space-5);
    max-width: 580px;
  }

  .ww2-hero-meta {
    display: flex;
    gap: var(--space-5);
    flex-wrap: wrap;
  }

  .ww2-hero-meta-item {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .ww2-hero-meta-label {
    font-size: 0.65rem;
    font-weight: var(--weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: rgba(255, 255, 255, 0.5);
  }

  .ww2-hero-meta-value {
    font-size: 1.1rem;
    font-weight: var(--weight-bold);
    color: #fff;
  }

  .ww2-scroll-hint {
    position: absolute;
    bottom: 16px;
    right: var(--space-6);
    z-index: 3;
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: rgba(255, 255, 255, 0.35);
    text-align: center;
    animation: ww2Bounce 2s ease-in-out infinite;
  }

  @keyframes ww2Bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(6px); }
  }

  /* ================================================================
     TIMELINE SECTION
     ================================================================ */
  .ww2-timeline-section {
    padding: var(--space-10) 0 var(--space-8);
  }

  .ww2-timeline-heading {
    font-size: clamp(1.5rem, 3vw, 2rem);
    font-weight: var(--weight-bold);
    color: var(--color-deep-night);
    margin: 0 0 var(--space-2);
    text-align: center;
  }

  .ww2-timeline-sub {
    font-size: 1rem;
    color: var(--color-slate);
    text-align: center;
    max-width: 640px;
    margin: 0 auto var(--space-10);
    line-height: 1.6;
  }

  /* Timeline container */
  .ww2-timeline {
    position: relative;
    max-width: 900px;
    margin: 0 auto;
  }

  /* Central vertical line */
  .ww2-timeline-line {
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 2px;
    background: linear-gradient(to bottom, #B71C1C 0%, #4A5568 40%, #388E3C 75%, #0D7377 100%);
    transform: translateX(-50%);
    opacity: 0.3;
  }

  /* ================================================================
     ERA MARKERS
     ================================================================ */
  .ww2-era-marker {
    position: relative;
    text-align: center;
    margin: var(--space-8) 0 var(--space-6);
    z-index: 2;
  }

  .ww2-era-marker:first-child {
    margin-top: 0;
  }

  .ww2-era-pill {
    display: inline-block;
    font-size: 0.72rem;
    font-weight: var(--weight-bold);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: #fff;
    padding: 8px 20px;
    border-radius: 40px;
  }

  /* ================================================================
     TIMELINE EVENT
     ================================================================ */
  .ww2-event {
    position: relative;
    display: flex;
    margin-bottom: var(--space-6);
    padding: 0 var(--space-4);
  }

  .ww2-event--left {
    justify-content: flex-start;
    padding-right: calc(50% + 24px);
  }

  .ww2-event--right {
    justify-content: flex-end;
    padding-left: calc(50% + 24px);
  }

  /* Dot on the timeline */
  .ww2-event-dot {
    position: absolute;
    left: 50%;
    top: 24px;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    transform: translateX(-50%);
    border: 3px solid var(--color-sand);
    z-index: 2;
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.06);
  }

  /* Event card */
  .ww2-event-card {
    position: relative;
    display: block;
    background: var(--color-white);
    border: 1px solid rgba(0, 0, 0, 0.06);
    border-radius: 14px;
    overflow: hidden;
    text-decoration: none;
    color: inherit;
    width: 100%;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .ww2-event-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);
  }

  .ww2-event-card--nolink {
    cursor: default;
    border-style: dashed;
    border-color: rgba(0, 0, 0, 0.12);
  }

  .ww2-event-card--nolink:hover {
    transform: none;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  }

  .ww2-event-media {
    position: relative;
    aspect-ratio: 21 / 9;
    display: flex;
    align-items: flex-end;
    justify-content: flex-start;
    padding: var(--space-3);
    overflow: hidden;
  }

  .ww2-event-video {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 0;
  }

  .ww2-event-date-badge {
    position: relative;
    z-index: 1;
  }

  .ww2-event-date-badge {
    font-size: 0.65rem;
    font-weight: var(--weight-bold);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: rgba(255, 255, 255, 0.9);
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    padding: 4px 12px;
    border-radius: 6px;
  }

  .ww2-event-body {
    padding: var(--space-3) var(--space-4) var(--space-5);
  }

  .ww2-event-title {
    font-size: 0.95rem;
    font-weight: var(--weight-bold);
    color: var(--color-deep-night);
    margin: 0 0 4px;
    line-height: 1.25;
  }

  .ww2-event-location {
    font-size: 0.72rem;
    color: var(--color-ocean-teal);
    font-weight: var(--weight-medium);
    margin: 0 0 var(--space-2);
  }

  .ww2-event-desc {
    font-size: 0.78rem;
    color: var(--color-slate);
    line-height: 1.55;
    margin: 0 0 var(--space-3);
  }

  .ww2-event-see {
    background: var(--color-sky);
    border-radius: 8px;
    padding: var(--space-2) var(--space-3);
    margin-bottom: var(--space-3);
  }

  .ww2-event-see-label {
    font-size: 0.65rem;
    font-weight: var(--weight-bold);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--color-ocean-teal);
    display: block;
    margin-bottom: 4px;
  }

  .ww2-event-see-text {
    font-size: 0.75rem;
    color: var(--color-slate);
    line-height: 1.5;
    margin: 0;
  }

  .ww2-event-cta {
    font-size: 0.72rem;
    font-weight: var(--weight-semibold);
    color: var(--color-ocean-teal);
  }

  .ww2-event-cta-group {
    display: flex;
    gap: var(--space-3);
    flex-wrap: wrap;
  }

  .ww2-event-cta-link {
    color: var(--color-ocean-teal);
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .ww2-event-cta-link:hover {
    color: var(--color-ocean-teal-dark, #095456);
    text-decoration: underline;
  }

  .ww2-event-card--multi {
    cursor: default;
  }

  .ww2-event-card--multi:hover {
    transform: translateY(-2px);
  }

  /* Hover overlay */
  .ww2-event-overlay {
    position: absolute;
    inset: 0;
    background: rgba(26, 35, 50, 0.94);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    padding: var(--space-4);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    overflow-y: auto;
  }

  .ww2-event-card:hover .ww2-event-overlay {
    opacity: 1;
    pointer-events: auto;
  }

  .ww2-event-overlay-text {
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.92);
    line-height: 1.55;
    margin: 0 0 var(--space-2);
  }

  .ww2-event-overlay-see {
    margin-bottom: var(--space-3);
  }

  .ww2-event-overlay-see-label {
    font-size: 0.6rem;
    font-weight: var(--weight-bold);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: rgba(255, 255, 255, 0.5);
    display: block;
    margin-bottom: 4px;
  }

  .ww2-event-overlay-see p {
    font-size: 0.72rem;
    color: rgba(255, 255, 255, 0.75);
    line-height: 1.45;
    margin: 0;
  }

  .ww2-event-overlay-cta {
    font-size: 0.75rem;
    font-weight: var(--weight-semibold);
    color: var(--color-warm-coral);
  }

  /* ================================================================
     RESPONSIVE — Stack timeline on mobile
     ================================================================ */
  @media (max-width: 768px) {
    .ww2-timeline-line {
      left: 20px;
    }

    .ww2-event--left,
    .ww2-event--right {
      padding-left: 48px;
      padding-right: 0;
      justify-content: flex-start;
    }

    .ww2-event-dot {
      left: 20px;
    }

    .ww2-hero {
      min-height: 55vh;
      padding: 0 var(--space-4) 40px;
    }

    .ww2-scroll-hint {
      display: none;
    }
  }

  /* ================================================================
     BOTTOM CTA
     ================================================================ */
  .ww2-cta-section {
    padding: var(--space-6) 0 var(--space-8);
  }

  .ww2-cta-card {
    background: linear-gradient(135deg, var(--color-deep-night) 0%, #2D3748 100%);
    border-radius: 20px;
    padding: var(--space-8) var(--space-6);
    text-align: center;
    color: #fff;
  }

  .ww2-cta-heading {
    font-size: clamp(1.3rem, 3vw, 1.8rem);
    font-weight: var(--weight-bold);
    margin: 0 0 var(--space-3);
    color: #fff;
  }

  .ww2-cta-text {
    font-size: 1rem;
    color: rgba(255, 255, 255, 0.75);
    max-width: 520px;
    margin: 0 auto var(--space-5);
    line-height: 1.6;
  }

  .ww2-cta-button {
    display: inline-block;
    background: var(--color-warm-coral);
    color: #fff;
    font-size: 0.9rem;
    font-weight: var(--weight-semibold);
    padding: 12px 28px;
    border-radius: 40px;
    text-decoration: none;
    transition: background 0.2s ease, transform 0.2s ease;
  }

  .ww2-cta-button:hover {
    background: #d4553b;
    transform: translateY(-2px);
  }

  /* ================================================================
     CROSS-LINKS
     ================================================================ */
  .ww2-crosslinks {
    padding: 0 0 var(--space-10);
  }

  .ww2-crosslinks-heading {
    font-size: 1.1rem;
    font-weight: var(--weight-bold);
    color: var(--color-deep-night);
    text-align: center;
    margin: 0 0 var(--space-4);
  }

  .ww2-crosslinks-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-4);
    max-width: 800px;
    margin: 0 auto;
  }

  @media (max-width: 640px) {
    .ww2-crosslinks-grid {
      grid-template-columns: 1fr;
    }
  }

  .ww2-crosslink-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-5) var(--space-4);
    background: var(--color-white);
    border: 1px solid rgba(0, 0, 0, 0.06);
    border-radius: 16px;
    text-decoration: none;
    color: inherit;
    text-align: center;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .ww2-crosslink-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
  }

  .ww2-crosslink-icon {
    font-size: 1.8rem;
  }

  .ww2-crosslink-label {
    font-size: 0.95rem;
    font-weight: var(--weight-bold);
    color: var(--color-deep-night);
  }

  .ww2-crosslink-desc {
    font-size: 0.78rem;
    color: var(--color-slate);
    line-height: 1.4;
  }

  /* ================================================================
     VIEW TOGGLE
     ================================================================ */
  .ww2-view-toggle {
    display: flex;
    justify-content: center;
    gap: 4px;
    background: var(--color-sand-dark);
    border-radius: 40px;
    padding: 4px;
    max-width: 240px;
    margin: 0 auto;
  }

  .ww2-toggle-btn {
    flex: 1;
    padding: 8px 20px;
    border: none;
    border-radius: 36px;
    font-size: 0.82rem;
    font-weight: var(--weight-semibold);
    cursor: pointer;
    background: transparent;
    color: var(--color-slate);
    transition: background 0.2s ease, color 0.2s ease;
  }

  .ww2-toggle-btn.active {
    background: var(--color-ocean-teal);
    color: #fff;
  }

  .ww2-toggle-btn:hover:not(.active) {
    color: var(--color-deep-night);
  }

  /* ================================================================
     MAP VIEW
     ================================================================ */
  .ww2-map-container {
    border-radius: 24px;
    position: relative;
    overflow: hidden;
    background: radial-gradient(ellipse at 40% 30%, #0c3547 0%, #091e2f 40%, #060f1a 100%);
    padding: 28px 20px 20px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.05);
    max-width: 600px;
    margin: 0 auto;
  }

  .ww2-map-container::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse 600px 300px at 30% 70%, rgba(13, 115, 119, 0.08) 0%, transparent 70%),
      radial-gradient(ellipse 400px 200px at 70% 20%, rgba(13, 115, 119, 0.06) 0%, transparent 70%);
    animation: ww2OceanShimmer 8s ease-in-out infinite alternate;
    pointer-events: none;
  }

  .ww2-map-container::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image:
      radial-gradient(circle 1px at 20% 30%, rgba(255, 255, 255, 0.03) 0%, transparent 100%),
      radial-gradient(circle 1px at 60% 50%, rgba(255, 255, 255, 0.02) 0%, transparent 100%),
      radial-gradient(circle 1px at 40% 80%, rgba(255, 255, 255, 0.02) 0%, transparent 100%);
    pointer-events: none;
  }

  @keyframes ww2OceanShimmer {
    0% { opacity: 0.5; }
    100% { opacity: 1; }
  }

  #ww2LeafletMap {
    width: 100%;
    height: 600px;
    border-radius: 16px;
    position: relative;
    z-index: 1;
  }

  .ww2-map-tooltip {
    position: absolute;
    background: rgba(26, 35, 50, 0.95);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 10px 14px;
    pointer-events: none;
    opacity: 0;
    transform: translateY(4px);
    transition: opacity 0.2s ease, transform 0.2s ease;
    z-index: 50;
    min-width: 160px;
    max-width: 280px;
  }

  .ww2-map-tooltip.ww2-tooltip-visible {
    opacity: 1;
    transform: translateY(0);
  }

  .ww2-map-tooltip-title {
    font-size: 0.85rem;
    font-weight: var(--weight-bold);
    color: white;
    margin-bottom: 2px;
    line-height: 1.3;
  }

  .ww2-map-tooltip-date {
    font-size: 0.65rem;
    color: rgba(255, 255, 255, 0.45);
    font-weight: var(--weight-medium);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin-bottom: 2px;
  }

  .ww2-map-tooltip-location {
    font-size: 0.72rem;
    color: var(--color-warm-coral);
    font-weight: var(--weight-medium);
  }

  .ww2-map-legend {
    display: flex;
    justify-content: center;
    gap: var(--space-5);
    padding: var(--space-3) var(--space-4);
    flex-wrap: wrap;
    position: relative;
    z-index: 1;
  }

  .ww2-map-legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.7rem;
    color: rgba(255, 255, 255, 0.45);
  }

  .ww2-map-legend-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    box-shadow: 0 0 6px rgba(13, 115, 119, 0.5);
  }

  @media (max-width: 768px) {
    #ww2LeafletMap { height: 450px; }
  }

  /* Personal intro */
  .ww2-personal {
    padding-block: var(--space-8);
  }

  .ww2-personal-quote {
    max-width: 680px;
    margin: 0 auto;
    padding: var(--space-6) var(--space-8);
    border-left: 4px solid var(--color-ocean-teal);
    background: var(--color-sky);
    border-radius: 0 12px 12px 0;
  }

  .ww2-personal-quote p {
    font-size: var(--text-body);
    color: var(--color-heading);
    line-height: var(--leading-body);
    font-style: italic;
    margin-bottom: var(--space-3);
  }

  .ww2-personal-quote cite {
    font-size: var(--text-caption);
    color: var(--color-ocean-teal);
    font-weight: var(--weight-semibold);
    font-style: normal;
  }
</style>
